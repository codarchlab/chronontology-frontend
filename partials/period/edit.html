<div>
    <h3>Edit</h3>

    <div class="row">
        <h4>ID</h4>
        <form class="form-group">
            <input required type="text" class="form-control" ng-model="$ctrl.period.id" readonly>
        </form>
    </div>

    <div class="row">
        <h4>Type</h4>
        <form class="form-group">
            <div class="col-md-6" ng-repeat="type in $ctrl.validTypes">
                <label>
                    <input type="radio" ng-model="$ctrl.period.type" value="{{type}}">
                    {{type}}
                </label>
            </div>
        </form>
    </div>

    <div class="row">
        <h4>
            {{ "period_names" | transl8 }}
        </h4>
        <div class="row">
            <div ng-init="languageIndex = $index"
                 ng-repeat="(language, names) in $ctrl.period.names">
                <div class="col-md-2">
                    <span class="input-group">
                        <span class="input-group-btn">
                             <button class="btn btn-danger"
                                     ng-click="$ctrl.removeLanguage(language)"
                                     type="button">
                                 <span class="glyphicon glyphicon-minus-sign" aria-hidden="true"></span>
                             </button>
                        </span>
                        <input type="text"
                               class="form-control"
                               ng-model="language">
                    </span>
                </div>
                <div class="col-md-10">
                     <div ng-repeat="name in names track by $index">
                         <div class="input-group">
                             <input type="text"
                                    class="form-control"
                                    ng-model="name">
                             <span class="input-group-btn">
                                 <button class="btn btn-danger"
                                         ng-click="$ctrl.removeName(language, $index)"
                                         type="button">
                                     <span class="glyphicon glyphicon-minus-sign" aria-hidden="true"></span>
                                 </button>
                            </span>
                         </div>
                     </div>
                     <div class="input-group">
                         <input type="text" class="form-control" id="name-input-{{language}}" placeholder="Add name...">
                         <span class="input-group-btn">
                             <button class="btn btn-success" ng-click="$ctrl.addName(language)" type="button">
                                 <span class="glyphicon glyphicon-plus-sign" aria-hidden="true"></span>
                             </button>
                         </span>
                     </div>
                </div>
            </div>
        </div>
        <p></p>
        <div class="row col-md-4">
            <div class="input-group">
                <span class="input-group-btn">
                    <button class="btn btn-success" ng-click="$ctrl.addLanguage()" type="button">
                        <span class="glyphicon glyphicon-plus-sign" aria-hidden="true"></span>
                    </button>
                </span>
                <input type="text" class="form-control" id="language-input" placeholder="Add language...">
            </div>
        </div>
    </div>

    <div class="row">
        <h4>{{ "period_type" | transl8 }}</h4>

        <form class="form-group">
            <div class="row">
                <div class="col-md-12 btn-group-sm">
                    <button class="btn btn-default" ng-click="$ctrl.selectAllSubtypes()">
                        Select all
                    </button>
                    <button class="btn btn-default" ng-click="$ctrl.deselectAllSubtypes()">
                        Deselect all
                    </button>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6" ng-repeat="subtype in $ctrl.validSubtypes">
                    <input type="checkbox"
                           name="selectedSubtypes"
                           value="{{subtype}}"
                           ng-checked="$ctrl.period.types.indexOf(subtype) > -1"
                           ng-click="$ctrl.toggleSubtypeSelection(subtype)">
                    {{subtype}}
                </div>
            </div>
        </form>
    </div>

    <div class="row">
        <h4>{{ "period_definition" | transl8 }}</h4>
        <textarea class="form-control" rows="3" ng-model="$ctrl.period.definition"></textarea>
    </div>

    <div class="row">
        <h4>{{ "period_description" | transl8 }}</h4>
        <textarea class="form-control" rows="3" ng-model="$ctrl.period.description"></textarea>
    </div>

    <div class="row">
        <h4>{{ "period_provenance" | transl8 }}</h4>
        <form class="form-group">
            <div class="col-md-6" ng-repeat="provenance in $ctrl.validProvenances">
            <label>
                <input type="radio" ng-model="$ctrl.period.provenance" value="{{provenance}}">
                {{provenance}}
            </label>
            </div>
        </form>
    </div>


    <div class="row">
        <h4>{{ "period_tags" | transl8 }}</h4>
        <div class="row">
            <div ng-repeat="tag in $ctrl.period.tags track by $index" class="col-md-6">
                <div class="input-group">
                    <span class="input-group-btn">
                         <button class="btn btn-danger"
                                 ng-click="$ctrl.removeTag(tag)"
                                 type="button">
                             <span class="glyphicon glyphicon-minus-sign" aria-hidden="true"></span>
                         </button>
                    </span>
                    <input type="text"
                           class="form-control"
                           ng-model="$ctrl.period.tags[$index]">
                </div>
            </div>
        </div>
        <p/>
        <div class="row col-md-12">
            <div class="input-group">
                <span class="input-group-btn">
                    <button class="btn btn-success" ng-click="$ctrl.addTag()" type="button">
                        <span class="glyphicon glyphicon-plus-sign" aria-hidden="true"></span>
                    </button>
                </span>
                <input type="text" class="form-control" id="tag-input" placeholder="Add tag...">
            </div>
        </div>
    </div>

    <div class="row">
        <h4>{{ "period_note" | transl8 }}</h4>
        <textarea class="form-control" rows="3" ng-model="$ctrl.period.note"></textarea>
    </div>

    <div class="row">
        <div class="row">

        </div>
    </div>

    <div class="row form-group">
        <h4>{{ "period_temporalExtent" | transl8 }}</h4>

        {{ "period_ongoing" | transl8 }}:
        <input type="checkbox"
               name="toggleOngoing"
               value="{{$ctrl.period.ongoing}}"
               ng-checked="$ctrl.period.ongoing"
               ng-click="$ctrl.period.ongoing = !$ctrl.period.ongoing">

        <p/>
        <div ng-init="timespanIndex = $index"
             ng-repeat="timespan in $ctrl.period.hasTimespan track by $index">
            <div class="row">
                <div class="col-md-1">
                    <span class="input-group-btn">
                         <button class="btn btn-danger"
                                 ng-click="$ctrl.removeTimespan(timespan)"
                                 type="button">
                             <span class="glyphicon glyphicon-minus-sign" aria-hidden="true"></span>
                         </button>
                    </span>
                </div>
                <div class="col-md-11">
                    <div>
                        {{ "ui_source" | transl8 }}
                        <input type="text"
                               class="form-control col-md-4"
                               ng-model="$ctrl.period.hasTimespan[timespanIndex].sourceOriginal">
                    </div>
                    <div>
                        {{ "ui_source_url" | transl8 }}
                        <input type="text"
                               class="form-control col-md-4"
                               ng-model="$ctrl.period.hasTimespan[timespanIndex].sourceURL">
                    </div>
                    <div>
                        {{ "ui_original_name" | transl8 }}
                        <textarea class="form-control" rows="3"
                                  ng-model="$ctrl.period.hasTimespan[timespanIndex].timeOriginal">
                        </textarea>
                    </div>
                    <div>
                        {{ "temporal_calendar" | transl8 }}
                        <input type="text"
                               class="form-control col-md-4"
                               ng-model="$ctrl.period.hasTimespan[timespanIndex].calendar">
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            {{ "temporal_begin" | transl8 }}:
                            <input type="text"
                                   class="form-control col-md-4"
                                   ng-model="$ctrl.period.hasTimespan[timespanIndex].begin.at">
                        </div>


                        <div class="col-md-6">
                            {{ "temporal_at_precision" | transl8 }}:
                            <input type="text"
                                   class="form-control col-md-4"
                                   ng-model="$ctrl.period.hasTimespan[timespanIndex].begin.atPrecision">
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            {{ "temporal_end" | transl8 }}:
                            <input type="text"
                                   class="form-control col-md-4"
                                   ng-model="$ctrl.period.hasTimespan[timespanIndex].end.at">
                        </div>

                        <div class="col-md-6">
                            {{ "temporal_at_precision" | transl8 }}:
                            <input type="text"
                                   class="form-control col-md-4"
                                   ng-model="$ctrl.period.hasTimespan[timespanIndex].end.atPrecision">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <p/>
        <div>
            <div class="row">
                <div class="col-md-1">
                    <span class="input-group-btn">
                         <button class="btn btn-success"
                                 ng-click="$ctrl.addTimespan()"
                                 type="button">
                             <span class="glyphicon glyphicon-plus-sign" aria-hidden="true"></span>
                         </button>
                    </span>
                </div>
                <div class="col-md-11">
                    <div>
                        {{ "ui_source" | transl8 }}
                        <input type="text"
                               class="form-control" id="timespan-source-input"
                               placeholder="Add value...">
                    </div>
                    <div>
                        {{ "ui_source_url" | transl8 }}
                        <input type="text"
                               class="form-control" id="timespan-source-url-input"
                               placeholder="Add value...">
                    </div>
                    <div>
                        {{ "ui_original_name" | transl8 }}
                        <textarea class="form-control" rows="3" id="timespan-original-input"
                                  placeholder="Add value..."></textarea>
                    </div>
                    <div>
                        {{ "temporal_calendar" | transl8 }}
                        <input type="text" class="form-control" id="timespan-calendar-input"
                               placeholder="Add value...">
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            {{ "temporal_begin" | transl8 }}:
                            <input type="text" class="form-control" id="timespan-begin-at-input"
                                   placeholder="Add value...">
                        </div>

                        <div class="col-md-6">
                            {{ "temporal_at_precision" | transl8 }}:
                            <input type="text" class="form-control"
                                   id="timespan-begin-at-precision-input" placeholder="Add value...">
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            {{ "temporal_end" | transl8 }}:
                            <input type="text" class="form-control" id="timespan-end-at-input"
                                   placeholder="Add value...">
                        </div>

                        <div class="col-md-6">
                            {{ "temporal_at_precision" | transl8 }}:
                            <input type="text" class="form-control"
                                   id="timespan-end-at-precision-input" placeholder="Add value...">
                        </div>
                    </div>
                </div>
            </div>
        </div>


    </div>
    <div class="row form-group">
        <h4>{{ "ui_relations" | transl8 }}</h4>

        <div class="col-md-12" ng-init="relationIndex = $index"
             ng-repeat="relationName in $ctrl.internalRelations">
            <div ng-if="relationName!='derived'">
                <div>{{ "relation_"+relationName | transl8 }}</div>
                <div class="col-md-4"
                     ng-init="valueIndex = $index"
                     ng-repeat="value in $ctrl.period.relations[relationName] track by $index">
                    <span class="input-group">
                        <input type="text"
                               class="form-control"
                               ng-model="$ctrl.period.relations[relationName][valueIndex]">
                        <span class="input-group-btn">
                             <button class="btn btn-danger"
                                     ng-click="$ctrl.removeRelation(relationName, value)"
                                     type="button">
                                 <span class="glyphicon glyphicon-minus-sign" aria-hidden="true"></span>
                             </button>
                        </span>
                    </span>
                </div>
                <div class="col-md-4">
                    <div class="input-group">
                        <input type="text" class="form-control" id="relation-input-{{relationName}}" placeholder="Add relation...">
                        <span class="input-group-btn">
                                 <button class="btn btn-success" ng-click="$ctrl.addRelation(relationName)" type="button">
                                     <span class="glyphicon glyphicon-plus-sign" aria-hidden="true"></span>
                                 </button>
                             </span>
                    </div>
                </div>
            </div>
        </div>

    </div>
    <div class="row form-group">
        <h4>{{ "ui_relations" | transl8 }} - <a href="https://en.wikipedia.org/wiki/Allen%27s_interval_algebra"
            target="_blank">Allen</a>
        </h4>

        <div class="col-md-12" ng-init="relationIndex = $index"
             ng-repeat="relationName in $ctrl.allenRelations">
            <div ng-if="relationName!='derived'">
                <div>{{ "relation_"+relationName | transl8 }}</div>
                <div class="col-md-4"
                     ng-init="valueIndex = $index"
                     ng-repeat="value in $ctrl.period.relations[relationName] track by $index">
                    <span class="input-group">
                        <input type="text"
                               class="form-control"
                               ng-model="$ctrl.period.relations[relationName][valueIndex]">
                        <span class="input-group-btn">
                                 <button class="btn btn-danger"
                                         ng-click="$ctrl.removeRelation(relationName, value)"
                                         type="button">
                                     <span class="glyphicon glyphicon-minus-sign" aria-hidden="true"></span>
                                 </button>
                            </span>
                    </span>
                </div>
                <div class="col-md-4">
                    <div class="input-group">
                        <input type="text" class="form-control" id="relation-input-{{relationName}}" placeholder="Add relation...">
                        <span class="input-group-btn">
                                 <button class="btn btn-success" ng-click="$ctrl.addRelation(relationName)" type="button">
                                     <span class="glyphicon glyphicon-plus-sign" aria-hidden="true"></span>
                                 </button>
                             </span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row form-group">
        <h4>{{ "ui_relations" | transl8 }} - <a href="https://gazetteer.dainst.org"
                                                target="_blank">iDAI.gazetteer</a>
        </h4>

        <div class="col-md-12" ng-init="relationIndex = $index"
             ng-repeat="relationName in $ctrl.gazetteerRelations">
            <div ng-if="relationName!='derived'">
                <div>{{ "relation_"+relationName | transl8 }}</div>
                <div
                     ng-init="valueIndex = $index"
                     ng-repeat="value in $ctrl.period[relationName] track by $index">
                    <span class="input-group">
                        <input type="text"
                               class="form-control"
                               ng-model="$ctrl.period[relationName][valueIndex]">
                        <span class="input-group-btn">
                                 <button class="btn btn-danger"
                                         ng-click="$ctrl.removeGazetteerRelation(relationName, value)"
                                         type="button">
                                     <span class="glyphicon glyphicon-minus-sign" aria-hidden="true"></span>
                                 </button>
                            </span>
                    </span>
                </div>
                <div>
                    <div class="input-group">
                        <input type="text" class="form-control"
                               id="gazetteer-relation-input-{{relationName}}"
                               placeholder="Add iDAI.gazetteer URI...">
                        <span class="input-group-btn">
                                 <button class="btn btn-success" ng-click="$ctrl.addGazetteerRelation(relationName)" type="button">
                                     <span class="glyphicon glyphicon-plus-sign" aria-hidden="true"></span>
                                 </button>
                             </span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <p>
        <div class="row">
            <button class="btn btn-primary" ng-click="$ctrl.saveChanges()">Save changes</button>
            <button class="btn btn-default" ng-click="$ctrl.reset()">Reset changes</button>
        </div>
    </p>
</div>
